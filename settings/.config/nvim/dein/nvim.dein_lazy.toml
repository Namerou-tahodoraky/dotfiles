# ---------------------------------------------------------------------------------------------
# ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç³»ãƒ„ãƒ¼ãƒ«.
# ä»–ãƒ„ãƒ¼ãƒ«ãŒå‹•ä½œã™ã‚‹ç‚ºã®ä¾å­˜é–¢ä¿‚.
# ---------------------------------------------------------------------------------------------

# Denoä¾å­˜ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹
[[plugins]]
repo = 'vim-denops/denops.vim'


# ---------------------------------------------------------------------------------------------
# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®šã®ç´¢å¼•ãƒ„ãƒ¼ãƒ«.
# ---------------------------------------------------------------------------------------------

[[plugins]]
# ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’é€šçŸ¥
repo = 'liuchengxu/vim-which-key'
hook_add = '''
nnoremap <silent> <leader> :WhichKey '<Space>'<CR>
'''


# ---------------------------------------------------------------------------------------------
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
# ---------------------------------------------------------------------------------------------

[[plugins]]
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜.
repo = 'rmagatti/auto-session'
# hook_add = '''
# nnoremap <silent> <leader> :WhichKey '<Space>'<CR>
# '''


# # ---------------------------------------------------------------------------------------------
# # ç”»é¢æç”»ãƒ„ãƒ¼ãƒ«(è‰², ã‚¢ã‚¤ã‚³ãƒ³,ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ãªã©)
# # ---------------------------------------------------------------------------------------------

[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter'
if = 'has("nvim")'
on_event = 'BufRead'
hook_post_update = 'TSUpdate'
hook_source = '''
lua <<EOF
require'nvim-treesitter.configs'.setup {
    -- ensure_installed = 'all',
    highlight = {
        enable = true,
        disable = {},
    },
}
EOF
'''

[[plugins]]
# ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®å¯è¦–åŒ–
repo = 'lukas-reineke/indent-blankline.nvim'
on_event = 'BufEnter'
hook_source = '''
lua << EOF
require("ibl").setup({scope = {show_exact_scope = false}})
EOF
'''

[[plugins]]
# ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹
# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã¨è¢«ã£ã¦ä¸€ç•ªå³ç«¯ã®æ–‡å­—ãŒè¦‹ãˆãªããªã‚‹ã®ã§æ³¨æ„.
repo = 'Xuyuanp/scrollbar.nvim'
on_event = ['BufEnter', 'BufNewFile']
hook_source = '''
augroup ScrollbarInit
  autocmd!
  autocmd WinScrolled,VimResized,QuitPre * silent! lua require('scrollbar').show()
  autocmd WinEnter,FocusGained           * silent! lua require('scrollbar').show()
  autocmd WinLeave,BufLeave,BufWinLeave,FocusLost            * silent! lua require('scrollbar').clear()
augroup end
'''


[[plugins]]
repo = 'kyazdani42/nvim-web-devicons'

[[plugins]]
repo = 'nvim-lualine/lualine.nvim'
# on_event = 'BufRead'
on_source = ["nvim-navic"]
hook_source = '''
lua << EOF
vim.opt.laststatus = 3 -- splitã—ã¦ã‚‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã¯åˆ†å‰²ã•ã‚Œãªã„.


local function diff_source()
  local gitsigns = vim.b.gitsigns_status_dict
  if gitsigns then
    return {
      added = gitsigns.added,
      modified = gitsigns.changed,
      removed = gitsigns.removed
    }
  end
end

-- stylua: ignore
local colors = {
  blue   = '#80a0ff',
  cyan   = '#79dac8',
  black  = '#080808',
  white  = '#c6c6c6',
  red    = '#ff5189',
  violet = '#d183e8',
  grey   = '#303030',
}

local bubbles_theme = {
  normal = {
    a = { fg = colors.black, bg = colors.violet },
    b = { fg = colors.white, bg = colors.grey },
    c = { fg = colors.black, bg = colors.black },
  },

  insert = { a = { fg = colors.black, bg = colors.blue } },
  visual = { a = { fg = colors.black, bg = colors.cyan } },
  replace = { a = { fg = colors.black, bg = colors.red } },

  inactive = {
    a = { fg = colors.white, bg = colors.black },
    b = { fg = colors.white, bg = colors.black },
    c = { fg = colors.black, bg = colors.black },
  },
}

-- local function get_color_by_branchname(branch_name)
--   print(branch_name)
--   -- if (string.len(branch_name) >= 7) and (string.sub(branch_name, 1, 7) == "feature") then
--   --   return {fg = colors.cyan}
--   -- else
--   --   return {fg = colors.violet}
--   -- end
-- 
--   -- if branch_name and (string.find(branch_name, "feature")) then
--   if branch_name then
--     if (string.find(branch_name, "feature")) then
--       return {fg = colors.cyan}
--     else
--       return {fg = colors.gray}
--     end
--   else
--     return {fg = colors.red}
--   end
--   -- if (string.len(branch_name) >= 15) then
--   --   if (string.sub(branch_name, 1, 7) == "feature") then
--   --     return {fg = colors.red}
--   --   else
--   --     return {fg = colors.gray}
--   --   end
--   -- else
--   --   return {fg = colors.violet}
--   -- end
-- end



require('lualine').setup {
  options = {
    theme = bubbles_theme,
    component_separators = '|',
    section_separators = { left = 'î‚´', right = 'î‚¶' },
    globalstatus = true, -- laststatus=3(ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã®åˆ†å‰²é˜²æ­¢)ã«å¯¾å¿œ.
  },
  sections = {
    lualine_a = {
      { 'mode', separator = { left = 'î‚¶' }, right_padding = 2 },
    },
    lualine_b = {
      {'b:gitsigns_head', color={fg=colors.red}},
      -- {'b:gitsigns_head', color=get_color_by_branchname(vim.b.gitsigns_head)},
      {'diff', symbols = { added='A:', modified='M:', removed='D:' }, source=diff_source, },
      {'filetype', icon_only=true, icon={align="left"}},
      'filename',
      {'navic', color={fg=colors.violet}},
      'diagnostics',
    },
    lualine_c = {'not visible area'},
    lualine_x = {""},
    lualine_y = {'encoding', 'fileformat'},
    lualine_z = {
      { 'location', separator = { right = 'î‚´' }, left_padding = 2 },
    },
  },
  inactive_sections = {
    lualine_a = { 'filename' },
    lualine_b = {},
    lualine_c = {},
    lualine_x = {},
    lualine_y = {},
    lualine_z = { 'location' },
  },
  tabline = {},
}
EOF
'''

[[plugins]]
# 
repo = 'akinsho/bufferline.nvim'
# on_event = 'BufRead'
on_event = 'BufEnter'
depends = ['nvim-web-devicons']
hook_source = '''
lua << EOF
require("bufferline").setup{}
EOF
'''

[[plugins]]
# ã‚¿ãƒ–ãƒãƒ¼ã«é–¢æ•°åãªã©ã®ã‚·ãƒ³ãƒœãƒ«è¡¨ç¤º.
repo = 'SmiteshP/nvim-navic'
on_event = 'BufEnter'
depends = ["nvim-lspconfig"]
# on_source = ["nvim-lspconfig"]
hook_source = '''
lua << EOF
require('nvim-navic').setup {
  lsp = {
    auto_attach = true,
  },
  highlight = false,
  depth_limit = 9,
}

-- -- å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯é–¢æ•°è¡¨ç¤ºã¯ã‚«ãƒ¼ã‚½ãƒ«ãŒæ­¢ã¾ã£ãŸæ™‚ã«è¡Œã†ã‚ˆã†ã«ã™ã‚‹.
-- vim.api.nvim_create_autocmd("BufEnter", {
--   group = vim.api.nvim_create_augroup('nvim-navic', {}),
--   callback = function()
--     if vim.api.nvim_buf_line_count(0) > 10000 then
--       vim.b.navic_lazy_update_context = true
--     end
--   end,
-- })
EOF
'''

# [[plugins]]
# # 16é€²æ•°ã‚«ãƒ©ãƒ¼æ–‡å­—ã«è‰²ã‚’ä»˜ã‘ã‚‹ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ„ãƒ¼ãƒ«.
# # ã¾ã è©¦ã—ãŸã“ã¨ã¯ãªã„ãŒä¸€å¿œè¨˜è¼‰.
# repo = 'norcalli/nvim-colorizer.lua'


# [[plugins]]
# åŠ¹ã‹ãªã„ã®ã§ç„¡åŠ¹åŒ–.åŸå› æœªèª¿æŸ».
# # diagnosticsã®è¡¨ç¤ºåˆ‡æ›¿ã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›.
# # è¡¨ç¤ºãŒå¤šã™ãã¦é‡ã„,è¦‹ã¥ã‚‰ã„æ™‚ã‚„ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã®vertualtextã‚’è¦‹ã‚„ã™ãã—ãŸã„æ™‚ãªã©ã«ä½¿ç”¨.
# # :ToggleDiag Toggle ALL diagnostics on/off
# # :ToggleDiagDefault Toggle ALL diagnostics to their default
# # :ToggleDiagOn Turn ALL diagnostics on
# # :ToggleDiagOff Turn ALL diagnostics off
# repo = 'WhoIsSethDaniel/toggle-lsp-diagnostics.nvim'
# on_source = 'nvim-lspconfig'
# hook_source = '''
# lua << EOF
# require('toggle_lsp_diagnostics').init(vim.diagnostic.config())
# EOF
# '''


# ---------------------------------------------------------------------------------------------
# ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†è£œåŠ©ãƒ„ãƒ¼ãƒ«.
# ---------------------------------------------------------------------------------------------

[[plugins]]
# treesitterã‚’åˆ©ç”¨ã—ãŸè‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³.
# treesitterã‚„åˆ¥ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã ã¨ãƒã‚°ã‚„èª¤å‹•ä½œãŒã¡ã‚‡ãã¡ã‚‡ãã‚ã‚‹.
repo = 'yioneko/nvim-yati'
on_source = 'nvim-treesitter'
hook_source = '''
lua <<EOF
require("nvim-treesitter.configs").setup {
  yati = { enable = true },
}
EOF
'''

# [[plugins]] # TODO: å…¨ç„¶ä½¿ã£ã¦ãªã„ã®ã§ä¸€æ™‚çš„ã«å‰Šé™¤. ä½¿ã†ã®ã‹å†è€ƒã™ã‚‹.
# # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€æ–‰ç½®æ›
# repo ='nvim-pack/nvim-spectre'
# depends = ['plenary.nvim']
# # on_source = 'nvim-lspconfig'
# on_event = 'BufRead'
# hook_source = '''
# lua << EOF
# require('spectre').setup()
# EOF
# '''
# hook_add = '''
# nnoremap <leader>R :lua require('spectre').open()<CR>
# "search current word
# nnoremap <leader>rw :lua require('spectre').open_visual({select_word=true})<CR>
# vnoremap <leader>r :lua require('spectre').open_visual()<CR>
# "  search in current file
# nnoremap <leader>rp viw:lua require('spectre').open_file_search()<cr>
# '''


# ---------------------------------------------------------------------------------------------
# ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•è£œåŠ©ãƒ„ãƒ¼ãƒ«.
# ---------------------------------------------------------------------------------------------

[[plugins]]
# Migemoäº’æ›ã®æ©Ÿèƒ½ã«ã‚ˆã‚‹ãƒ­ãƒ¼ãƒå­—å…¥åŠ›ã§ã‚‚æ—¥æœ¬èªæ¤œç´¢ãŒã§ãã‚‹.
# Typescriptã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Š,Migemoã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã„ã‚‰ãªã„.
# ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å˜ä½“ã ã¨ã‚³ãƒãƒ³ãƒ‰ã®æä¾›ã‚„kensaku.vimã¸ã®ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã¯è¡Œã‚ã‚Œãš,
# å‘¼ã³å‡ºã™ç‚ºã«ã¯kensaku-search.vimã‚„kensaku-comanndo.vimã‚‚ã‚»ãƒƒãƒˆã§å¿…è¦.
repo = 'lambdalisue/kensaku.vim'
on_source = ["denops.vim"]

[[plugins]]
# / ã§ã®æ¤œç´¢æ™‚ã«kensaku.vimã‚’æœ‰åŠ¹åŒ–.
# Enterã‚’æŠ¼ã—ãŸæ™‚ã«æ—¥æœ¬èªç”¨ã®æ¤œç´¢æ–‡å­—åˆ—ãŒå±•é–‹ã•ã‚Œã‚‹ç‚º,
# æ¤œç´¢æ–‡å­—åˆ—å…¥åŠ›ä¸­ã¯ãƒãƒƒãƒã™ã‚‹æ–‡å­—ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆãŒã§ãªã„ã“ã¨ã«æ³¨æ„.
repo = 'lambdalisue/kensaku-search.vim'
on_source = ["kensaku.vim"]
hook_source = '''
cnoremap <CR> <Plug>(kensaku-search-replace)<CR>
'''

[[plugins]]
# EasyMotionç³»ãƒ„ãƒ¼ãƒ«.
# å¤§æ–‡å­—ã¯ãƒ’ãƒƒãƒˆæ–‡å­—ã«é£›ã¶ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ç‚ºã€æ¤œç´¢æ™‚ã®å…¥åŠ›ã¯IgunoreCaseã¨ãªã‚‹.
# kensaku.vimã¨ã®é€£æºã«ã‚ˆã£ã¦ãƒ­ãƒ¼ãƒå­—å…¥åŠ›ã§æ—¥æœ¬èªãŒãƒ’ãƒƒãƒˆã™ã‚‹.
repo = 'yuki-yano/fuzzy-motion.vim'
on_source = ["kensaku.vim"]
hook_source = '''
let g:fuzzy_motion_disable_match_highlight=v:true
let g:fuzzy_motion_matchers=["fzf", "kensaku"]
nnoremap <buffer><silent>ss :FuzzyMotion<CR>
'''


[[plugins]]
# ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
repo = 'karb94/neoscroll.nvim'
on_event = 'BufEnter'
hook_source = '''
lua <<EOF
require('neoscroll').setup({
    mappings = {'<C-u>', '<C-d>', '<C-y>', '<C-e>'},
})
-- require('neoscroll').setup()
EOF
'''

# [[plugins]] # ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ä½•å€‹ç›®ã‹ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œãªã„. # TODO: èª¿æŸ».
# # æ¤œç´¢ã«ãƒ’ãƒƒãƒˆã—ãŸã‚‚ã®ãŒä½•å€‹ä¸­ä½•å€‹ç›®ã‹ã‚’vertualtextã§è¡¨ç¤ºã™ã‚‹
# repo = 'kevinhwang91/nvim-hlslens'
# on_event = 'BufEnter'
# hook_add = '''
# noremap <silent> n <Cmd>execute('normal! ' . v:count1 . 'n')<CR>
#             \<Cmd>lua require('hlslens').start()<CR>
# noremap <silent> N <Cmd>execute('normal! ' . v:count1 . 'N')<CR>
#             \<Cmd>lua require('hlslens').start()<CR>
# '''
# # hook_source = '''
# # lua << EOF
# # require('hlslens').setup()
# # 
# # local kopts = {noremap = true, silent = true}
# # 
# # vim.api.nvim_set_keymap('n', 'n',
# #     [[<Cmd>execute('normal! ' . v:count1 . 'n')<CR><Cmd>lua require('hlslens').start()<CR>]],
# #         kopts)
# # vim.api.nvim_set_keymap('n', 'N',
# #     [[<Cmd>execute('normal! ' . v:count1 . 'N')<CR><Cmd>lua require('hlslens').start()<CR>]],
# #         kopts)
# # vim.api.nvim_set_keymap('n', '*', [[*<Cmd>lua require('hlslens').start()<CR>]], kopts)
# # vim.api.nvim_set_keymap('n', '#', [[#<Cmd>lua require('hlslens').start()<CR>]], kopts)
# # vim.api.nvim_set_keymap('n', 'g*', [[g*<Cmd>lua require('hlslens').start()<CR>]], kopts)
# # vim.api.nvim_set_keymap('n', 'g#', [[g#<Cmd>lua require('hlslens').start()<CR>]], kopts)
# # EOF
# # '''

[[plugins]] # nvim-hlslensã‚’ä¸€æ—¦æ¶ˆã—ãŸã®ã§ã“ã£ã¡ã‚‚åˆã‚ã›ã¦æ¶ˆã—ã¦ãŠã # TODO: æˆ»ã™.
# æ¤œç´¢æ™‚ã«å‹æ‰‹ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒç§»å‹•ã™ã‚‹ã®ã‚’é˜²ã.
# é¸æŠç¯„å›²ã®æ–‡å­—åˆ—ã§ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯æ¤œç´¢ã™ã‚‹æ©Ÿèƒ½ã‚‚ã‚‚ã¤.
# ã‚­ãƒ¼ãƒãƒƒãƒ—ã«vim-asteriskã¨nvim-hlslensã®æ©Ÿèƒ½ä¸¡æ–¹ã‚’çµã³ã¤ã‘ã‚‹ç‚ºã«ã€nvim-hlslensã‚’dependsã«ã—ã¦ã„ã‚‹.
repo = 'haya14busa/vim-asterisk'
# depends = ['nvim-hlslens']
# # on_source = 'nvim-hlslens'
# hook_add = '''
# map * <Plug>(asterisk-z*)<Cmd>lua require('hlslens').start()<CR>
# map # <Plug>(asterisk-z#)<Cmd>lua require('hlslens').start()<CR>
# map g* <Plug>(asterisk-gz*)<Cmd>lua require('hlslens').start()<CR>
# map g# <Plug>(asterisk-gz#)<Cmd>lua require('hlslens').start()<CR>
# let g:asterisk#keeppos = 1
# # '''
on_event = 'BufEnter'
hook_add = '''
map * <Plug>(asterisk-z*)
map # <Plug>(asterisk-z#)
map g* <Plug>(asterisk-gz*)
map g# <Plug>(asterisk-gz#)
let g:asterisk#keeppos = 1
'''

# ---------------------------------------------------------------------------------------------
# ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è£œåŠ©.
# LSPã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—.
# ---------------------------------------------------------------------------------------------

[[plugins]]
repo = 'neovim/nvim-lspconfig'
# on_event = 'BufEnter'
# depends = ["ddc-nvim-lsp-setup"]
on_source = ["ddc-nvim-lsp-setup"]
# hook_source = '''
# lua << EOF
# 
# -- -- ã“ã‚Œã¤ã‘ã‚‹ã¨yamllsãŒå‹•ã‹ãªã„.
# -- -- nvim-lsp.yamlls.setup {
# -- --   settings = {
# -- --     yaml = {
# -- --       schemas = require('schemastore').yaml.schemas {
# -- --        select = {
# -- --          'docker-compose.yml',
# -- --        },
# -- --      },
# -- --     },
# -- --   },
# -- -- }
# -- 
# -- require'lspconfig'.yamlls.setup{
# --    cmd = {"~/.local/share/nvim/lsp_servers/yaml/node_modules/.bin/yaml-language-server", "--stdio"},
# --    -- on_attach = require'lsp'.common_on_attach,
# --    settings = {
# --        yaml = {
# --            format = {
# --                    enable = true,
# --            },
# --            hover = true,
# --            completion = true,
# -- 
# --            customTags = {
# --                "!fn",
# --                "!And",
# --                "!If",
# --                "!Not",
# --                "!Equals",
# --                "!Or",
# --                "!FindInMap sequence",
# --                "!Base64",
# --                "!Cidr",
# --                "!Ref",
# --                "!Ref Scalar",
# --                "!Sub",
# --                "!GetAtt",
# --                "!GetAZs",
# --                "!ImportValue",
# --                "!Select",
# --                "!Split",
# --                "!Join sequence"
# --            },
# --        },
# --    },
# --  }
# 
# EOF
# '''

[[plugins]]
# mason.nvimã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’nvim-lspconfigã®è¨­å®šã«æµã™æ©‹æ¸¡ã—å½¹.
# mason.nvimã§èªè­˜ã•ã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åã¨nvim-lspconfigã§èªè­˜ã•ã‚Œã‚‹Launguage ServeråãŒç•°ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã£ãŸã‚Šã€ãã†ã„ã†è¨­å®šã®é¢å€’äº‹ã‚’å¸åã—ã¦ã„ã‚‹.
# nvim-lspconfigã«ã‹ã‘ã‚‹è¨­å®šé …ç›®ã‚‚ã“ã¡ã‚‰ã«æ›¸ãæ–¹ãŒç„¡é›£ã‹.
repo ='williamboman/mason-lspconfig.nvim'
on_source = ['nvim-lspconfig', "masson.nvim"]
hook_source = '''
lua << EOF
require("mason-lspconfig").setup()
require("mason-lspconfig").setup_handlers {
  function(server_name) -- default handler (optional)
    require("lspconfig")[server_name].setup {
      -- on_attach = on_attach,
      on_attach = function (client, bufnr)
        local function buf_set_keymap(...) vim.api.nvim_buf_set_keymap(bufnr, ...) end
        local function buf_set_option(...) vim.api.nvim_buf_set_option(bufnr, ...) end

        local opts = { noremap=true, silent=true }
        buf_set_keymap('n', 'gd', '<Cmd>lua vim.lsp.buf.definition()<CR>', opts)
        buf_set_keymap('n', 'gK', '<Cmd>lua vim.lsp.buf.hover()<CR>', opts)
        buf_set_keymap('n', 'gi', '<cmd>lua vim.lsp.buf.implementation()<CR>', opts)
        buf_set_keymap('n', 'gs', '<cmd>lua vim.lsp.buf.signature_help()<CR>', opts)
        -- dduã§å®Ÿè¡Œ.
        -- buf_set_keymap('n', 'gr', '<cmd>lua vim.lsp.buf.references()<CR>', opts)
        buf_set_keymap('n', 'gx', '<cmd>lua vim.diagnostic.open_float(0, {scope="line"})<CR>', opts)
        buf_set_keymap('n', 'g[', '<cmd>lua vim.diagnostic.goto_prev({float={...}})<CR>', opts)
        buf_set_keymap('n', 'g]', '<cmd>lua vim.diagnostic.goto_next({float={...}})<CR>', opts)
      end
    }
  end
}

-- # ---------------------------------------------------------------------------------------------
-- # ruffã¨é‡è¤‡ã—ã¦ã„ã‚‹pylspã®ãƒªãƒ³ãƒˆã‚’æ¶ˆã™.
-- # ---------------------------------------------------------------------------------------------
require("lspconfig").pylsp.setup {
-- local servers = {
--   pylsp = {
--     cmd = {"pylsp"},
--     root_dir = function(fname)
--       local root_files = {
--         'pyproject.toml',
--         'setup.py',
--         'setup.cfg',
--         'requirements.txt',
--         'Pipfile',
--       }
--       return util.root_pattern(unpack(root_files))(fname) or util.find_git_ancestor(fname)
--     end,
  settings = {
    pylsp = {
      -- configurationSources = {"pylint"},
      plugins = {
        pylint = { enabled = true },
        autpep8 = { enabled = false },
        flake8 = { enabled = false },
        pycodestyle = { enabled = false },
        pyflakes = { enabled = false },
      }
    }
  }
--  }
-- }
}

-- # ---------------------------------------------------------------------------------------------
-- # diagnosticã®ã‚¨ãƒ‡ã‚£ã‚¿ç”»é¢ã¸ã®æç”»è¨­å®š.
-- # ---------------------------------------------------------------------------------------------
vim.lsp.handlers["textDocument/publishDiagnostics"] = vim.lsp.with(
  vim.lsp.diagnostic.on_publish_diagnostics, {
    -- -- Enable underline, use default values
    -- underline = true,
    underline = false,
    -- -- Enable virtual text, override spacing to 4
    -- virtual_text = {
    --   spacing = 4,
    -- },
    virtual_text = true,
    -- Use a function to dynamically turn signs off
    -- and on, using buffer local variables
    -- signs = function(bufnr, client_id)
    --   return vim.bo[bufnr].show_signs == false
    -- end,
    signs = true,
    -- -- Disable a feature
    update_in_insert = false,
  }
)


EOF
'''


# ---------------------------------------------------------------------------------------------
# ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è£œåŠ©.
# è‡ªå‹•è£œå®Œãªã©ã®å…¥åŠ›è£œåŠ©ç³».
# ---------------------------------------------------------------------------------------------

# å…¥åŠ›ã«å¯¾å¿œã—ã¦æ§˜ã€…ãªè£œå®Œå€™è£œã‚’é›†ç´„ã—ã¦ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã‚‹.
# è£œå®Œå€™è£œã‚’ç”Ÿæˆã™ã‚‹ã®ã¯sourceç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å½¹å‰².
[[plugins]]
repo = 'Shougo/ddc.vim'
# on_event = 'InsertEnter'
on_event = 'BufEnter'
depends = ['denops.vim']
hook_source = '''
call ddc#custom#patch_global('sources', ['nvim-lsp', 'around', "vsnip", 'file'])
call ddc#custom#patch_global('ui', 'pum')
call ddc#custom#patch_global('sourceOptions', {
     \ '_': {
     \   'matchers': ['matcher_fuzzy'],
     \   'sorters': ['sorter_fuzzy'],
     \   'converters': ['converter_fuzzy'],
     \ },
     \ 'around': {'mark': 'AROUND'},
     \ 'file': {'mark': 'FILE'},
     \ 'nvim-lsp': {
     \   'mark': 'LSP',
     \   'dup': 'keep',
     \   'keywordPattern': '\k+',
     \   'sorters': ['sorter_lsp-kind'],
     \   "forceCompletionPattern": '\.\w*|:\w*|->\w*',
     \ },
     \ 'vsnip': {'mark': 'SNIP'},
\})

call ddc#custom#patch_global('sourceParams', {
\  'around': {'maxSize': 500},
\  'nvim-lsp': {
\    'snippetEngine': denops#callback#register({
\          body -> vsnip#anonymous(body) }),
\    'enableResolveItem': v:true,
\    'enableAdditionalTextEdit': v:true,
\    'confirmBehavior': 'replace',
\  },
\})

call ddc#enable()
'''
# # LSPã®è£œå®Œé–‹å§‹ã‚’é…ãã™ã‚‹è¨­å®š(ä¸»ã«Terraformã®resourceè£œå®Œç”¨)
# hook_add = '''
# nnoremap <silent> gcl :call ddc#custom#patch_global('sourceOptions', {'nvim-lsp': {'minAutoCompleteLength': 5}})<CR>
# nnoremap <silent> gcs :call ddc#custom#patch_global('sourceOptions', {'nvim-lsp': {'minAutoCompleteLength': 1}})<CR>

[[plugins]]
repo = 'Shougo/ddc-ui-pum'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-source-nvim-lsp'
on_source = 'ddc.vim'

[[plugins]]
repo = 'uga-rosa/ddc-nvim-lsp-setup'
on_source = 'ddc.vim'
hook_source = '''
lua << EOF
require("ddc_nvim_lsp_setup").setup()
EOF
'''

[[plugins]]
repo = 'tani/ddc-fuzzy'
on_source = 'ddc.vim'

[[plugins]]
repo = 'Shougo/ddc-source-around'
on_source = 'ddc.vim'

# ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è£œå®Œã™ã‚‹source
[[plugins]]
repo = 'LumaKernel/ddc-source-file'
on_source = 'ddc.vim'

# vsnipå½¢å¼ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’LSPã§å‘¼ã³å‡ºã™source
[[plugins]]
repo = 'uga-rosa/ddc-source-vsnip'
on_source = 'ddc.vim'

# ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
[[plugins]]
repo = 'Shougo/pum.vim'
# on_source = 'ddc.vim'
# depends = ['vim-vsnip-integ']
# <Tab>ã¨<S-Tab>ãŒä½•æ•…ã‹åŠ¹ã‹ãªã„ã®ã§ã„ã£ãã®ã“ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹.
hook_add = '''
" "inoremap <Tab> <Cmd>call pum#map#insert_relative(+1)<CR>
" "inoremap <S-Tab> <Cmd>call pum#map#insert_relative(-1)<CR>
" "inoremap <silent><expr> <TAB>
" "     \ pum#visible() ? '<Cmd>call pum#map#insert_relative(+1)<CR>' :
" "     \ (col('.') <= 1 <Bar><Bar> getline('.')[col('.') - 2] =~# '\s') ?
" "     \ '<TAB>' : ddc#manual_complete()
" "inoremap <S-Tab> <Cmd>call pum#map#insert_relative(-1)<CR>
inoremap <C-n>   <Cmd>call pum#map#insert_relative(+1)<CR>
inoremap <C-p>   <Cmd>call pum#map#insert_relative(-1)<CR>
'''



# # [[plugins]] # TODO: å‰Šé™¤ã™ã‚‹.
# # # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®linterã‚„foratterã‚’å‘¼ã³å‡ºã—ã¦ã®å‡ºåŠ›çµæœã‚’LSPã«æ¸¡ã™
# # repo ='jose-elias-alvarez/null-ls.nvim'
# # depends = ['plenary.nvim']
# # on_source = 'nvim-lspconfig'
# # hook_source = '''
# # lua << EOF
# # require("null-ls").setup({
# #     sources = {
# #         -- require("null-ls").builtins.completion.spell,
# #         require("null-ls").builtins.diagnostics.flake8,
# #         require("null-ls").builtins.diagnostics.mypy,
# #         require("null-ls").builtins.diagnostics.shellcheck,
# #         require("null-ls").builtins.diagnostics.cfn_lint,
# #         require("null-ls").builtins.formatting.ruff,
# #         require("null-ls").builtins.diagnostics.ruff,
# #         -- require("null-ls").builtins.diagnostics.mypy.with({
# #         --     command = "pipenv run mypy",
# #         -- }),
# #     }
# # })
# # EOF
# # '''

[[plugins]]
# LSPã®å‹•ä½œå¾…ã¡ä¸­ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹.
# ä¸‹è¨˜ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã¨ã‚Šã‚ãˆãšå¤–ã—ãŸ.
# fidget.nvim will soon be rewritten. Please checkout the 'legacy' tag to avoid breaking changes
# -> 2023/11/01ã§ã¯legacyå›ºå®šã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹. # TODO: å®šæœŸçš„ã«ãƒã‚°ãŒå–ã‚Šé™¤ã‹ã‚ŒãŸã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹.
repo = 'j-hui/fidget.nvim'
rev = "legacy"
on_event = 'BufEnter'
hook_source = '''
lua require"fidget".setup{}
'''

# ddcã®å€™è£œé¸æŠä¸­ã«ã‚·ã‚°ãƒã‚¤ãƒãƒ£ãƒ¼ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã‚‹.
[[plugins]]
repo = 'matsui54/denops-popup-preview.vim'
on_source = 'ddc.vim'
depends = ['denops.vim']
hook_source = '''
call popup_preview#enable()
'''

# é–¢æ•°ã®()å†…å…¥åŠ›ä¸­ã«ã‚·ã‚°ãƒã‚¤ãƒãƒ£ãƒ¼ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã‚‹.
# ddcã‚„denops-popup-preview.vimã¨ã¯ç‹¬ç«‹ã—ã¦å‹•ã.
[[plugins]]
repo = 'ray-x/lsp_signature.nvim'
on_event = 'BufRead'
hook_source = '''
lua << EOF
require("lsp_signature").setup()
EOF
 '''

[[plugins]]
# diagnosticsã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹.diagnosticsã®ç™ºç”Ÿå€‹æ‰€ã«é£›ã¹ã‚‹.
# ä¸€è¦§ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã‚‹ã ã‘ã§ç™ºç”Ÿå€‹æ‰€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€
# LSPã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã§ä¸€ã¤ãšã¤é£›ã¶ã‚ˆã‚Šæ¥½.
# å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ :TroubleToggle
# å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ :TroubleRefresh
repo = 'folke/trouble.nvim'
depends = ['nvim-web-devicons']
on_event = 'BufRead'
hook_source = '''
lua << EOF
require("trouble").setup {}
-- vim.keymap.set("n", "<leader>gxd", function() require("trouble").toggle("document_diagnostics") end)
vim.keymap.set("n", "gX", function() require("trouble").toggle("workspace_diagnostics") end)
EOF
'''


[[plugins]]
# TODO: æ›´æ–°å¯¾å¿œ.
repo = 'hrsh7th/vim-vsnip'
# on_source = 'ddc.vim'
# hook_source = '''
on_event = 'InsertEnter'
hook_add = '''
" Expand
" ä¿®æ­£ã—ãŸã„æ™‚ã«jump-prevã§æˆ»ã£ã¦ã‚‚ç·¨é›†ã™ã‚‹ã¨vsnipãƒ¢ãƒ¼ãƒ‰ãŒè§£ã‘ã¦ã—ã¾ã†ã®ã§jump-nextã®ã¿è¨­å®š.
imap <expr> <C-j>   vsnip#available(1)  ? '<Plug>(vsnip-expand-or-jump)' : '<C-l>'
smap <expr> <C-j>   vsnip#available(1)  ? '<Plug>(vsnip-expand-or-jump)' : '<C-l>'
imap <expr> <A-j>   vsnip#jumpable(1)   ? '<Plug>(vsnip-jump-next)'      : '<Tab>'
smap <expr> <A-j>   vsnip#jumpable(1)   ? '<Plug>(vsnip-jump-next)'      : '<Tab>'

" If you want to use snippet for multiple filetypes, you can `g:vsnip_filetypes` for it.
let g:vsnip_filetypes = {}
let g:vsnip_filetypes.python = ['python']

" let g:vsnip_snippet_dir = expand('~/.config/nvim/vsnips')
let g:vsnip_snippet_dirs = []
let g:vsnip_snippet_dirs += ['~/.config/nvim/vsnips/python']
let g:vsnip_snippet_dirs += ['~/.config/nvim/vsnips/python/pytest']
let g:vsnip_snippet_dirs += ['~/.config/nvim/vsnips/terraform']
'''


# ---------------------------------------------------------------------------------------------
# ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«.
# ---------------------------------------------------------------------------------------------
[[plugins]]
# ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
# ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³: ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ãŒé–¢æ•°ãªã‚‰ãã®é–¢æ•°å†…ã«å…¥ã‚‹.
# ã‚¹ãƒ†ãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼: ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ãŒé–¢æ•°ã§ã‚‚ãã®é–¢æ•°å†…ã«å…¥ã‚‰ãšã«é€²ã‚€.
# ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ã‚¦ãƒˆ: ç¾åœ¨ã®(é–¢æ•°)ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å‡ºã‚‹ã¾ã§é€²ã‚€.
repo = 'mfussenegger/nvim-dap'
on_ft = ['python']
hook_add = '''
nnoremap <silent> <A-7> :lua require'dap'.continue()<CR>
nnoremap <silent> <A-8> :lua require'dap'.step_over()<CR>
nnoremap <silent> <A-9> :lua require'dap'.step_into()<CR>
nnoremap <silent> <A-0> :lua require'dap'.step_out()<CR>
nnoremap <silent> <leader>dq :lua require'dap'.terminate(); require'dapui'.close()<CR>
nnoremap <silent> <leader>dd :lua require'dap'.toggle_breakpoint()<CR>
nnoremap <silent> <leader>dc :lua require'dap'.set_breakpoint(vim.fn.input('Breakpoint condition: '))<CR>
nnoremap <silent> <leader>dC :lua require'dap'.clear_breakpoints()<CR>
" nnoremap <silent> <leader>dp :lua require'dap'.set_breakpoint(nil, nil, vim.fn.input('Log point message: '))<CR>
" nnoremap <silent> <leader>dr :lua require'dap'.repl.open()<CR>

lua << EOF

-- ã‚¢ã‚¤ã‚³ãƒ³è¨­å®š
vim.fn.sign_define('DapBreakpoint', {text='ğŸ›‘', texthl='ErrorMsg', linehl='', numhl=''})
vim.fn.sign_define('DapStopped', { text='ó°œ´', texthl='Question' })

-- vim.api.nvim_create_autocmd("ColorScheme", {
-- 	pattern = "*",
-- 	group = "UserDefLoadOnce",
-- 	desc = "prevent colorscheme clears self-defined DAP icon colors.",
-- 	callback = function()
-- 		vim.api.nvim_set_hl(0, 'DapBreakpoint', { ctermbg = 0, fg = '#993939' })
-- 		vim.api.nvim_set_hl(0, 'DapLogPoint', { ctermbg = 0, fg = '#61afef' })
-- 		vim.api.nvim_set_hl(0, 'DapStopped', { ctermbg = 0, fg = '#98c379' })
-- 	end
-- })
-- 
-- vim.fn.sign_define('DapBreakpoint', { text=' ï˜®', texthl='DapBreakpoint' })
-- vim.fn.sign_define('DapBreakpointCondition', { text=' ï³', texthl='DapBreakpoint' })
-- vim.fn.sign_define('DapBreakpointRejected', { text=' ïª', texthl='DapBreakpoint' })
-- vim.fn.sign_define('DapLogPoint', { text=' ïš', texthl='DapLogPoint' })
-- vim.fn.sign_define('DapStopped', { text=' ï…„', texthl='DapStopped' })

-- vim.fn.sign_define('DapBreakpoint', 
--     {
--         text='ğŸ”´', -- nerdfonts icon here
--         texthl='DapBreakpointSymbol', 
--         linehl='DapBreakpoint', 
--         numhl='DapBreakpoint'
--     })
-- vim.fn.sign_define('DapStopped', 
--     {
--         text='ğŸ”´', -- nerdfonts icon here
--         texthl='DapStoppedSymbol', 
--         linehl='DapBreakpoint', 
--         numhl='DapBreakpoint'
--     })
-- EOF

-- -- stylua: ignore
-- local colors = {
--   blue   = '#80a0ff',
--   cyan   = '#79dac8',
--   black  = '#080808',
--   white  = '#c6c6c6',
--   red    = '#ff5189',
--   violet = '#d183e8',
--   grey   = '#303030',
-- }
-- vim.api.nvim_set_hl(0, 'DapBreakpoint', { ctermbg = 0, fg = '#993939', bg = '#31353f' })
-- vim.fn.sign_define('DapBreakpoint', { text='ï„‘', texthl='DapBreakpoint' })
'''

[[plugins]]
# debugpyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹.
repo = 'mfussenegger/nvim-dap-python'
depends = ['nvim-dap']
on_ft = 'python'
hook_source = '''
lua << EOF
require('dap-python').setup('~/.cache/debugpy/.venv/bin/python')
table.insert(require('dap').configurations.python, {
  type = 'python',
  request = 'launch',
  name = 'python normal debug',
  program = '${file}',
  cwd = '${workspaceFolder}',
})
EOF
'''

[[plugins]]
# DAPç”¨ã®ãƒ‡ãƒãƒƒã‚°ç”»é¢.
repo = 'rcarriga/nvim-dap-ui'
on_source = ['nvim-dap']
hook_source = '''
lua << EOF
-- require('dapui').setup()
require('dapui').setup(
  {
    layouts = {
      {
        -- position=leftã®æ™‚ã¯å…ˆã«å®šç¾©ã—ãŸelementsãŒä¸‹å´ã«ãªã‚‹.
        elements = {
          {
            id = "breakpoints",
            size = 0.25,
          },
          {
            id = "stacks",
            size = 0.25,
          },
          {
            id = "watches",
            size = 0.25,
          },
          {
            id = "scopes",
            size = 0.25,
          },
        },
        position = "left",
        size = 80,
      },
      {
        -- position=bottomã®æ™‚ã¯å…ˆã«å®šç¾©ã—ãŸelementsãŒå³å´ã«ãªã‚‹.
        elements = {
          {
            id = "console",
            size = 0.2,
          },
          {
            id = "repl",
            size = 0.8,
          },
        },
        position = "bottom",
        size = 15
      },
    },
  }
)
-- ãƒ‡ãƒãƒƒã‚°é–‹å§‹æ™‚ã«è‡ªå‹•ã§UIç”»é¢ã‚’é–‹ã.
require'dap'.listeners.before['event_initialized']['custom'] = function(session, body)
  require'dapui'.open()
end
-- ãƒ‡ãƒãƒƒã‚°çµ‚äº†æ™‚ã«è‡ªå‹•ã§UIç”»é¢ã‚’é–‰ã˜ã‚‹.
require'dap'.listeners.before['event_terminated']['custom'] = function(session, body)
  require'dapui'.close()
end
EOF
'''

[[plugins]]
# ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
# å¤‰æ•°ã®å€¤ã‚’vertualtextã§è¡¨ç¤ºã™ã‚‹
repo = 'theHamsta/nvim-dap-virtual-text'
on_source = ['nvim-dap']
hook_source = '''
lua << EOF
require("nvim-dap-virtual-text").setup {
    highlight_changed_variables = true,    -- highlight changed values with NvimDapVirtualTextChanged, else always NvimDapVirtualText
    highlight_new_as_changed = true,      -- highlight new variables in the same way as changed variables (if highlight_changed_variables)
    -- experimental features:
    all_frames = true,                    -- show virtual text for all stack frames not only current. Only works for debugpy on my machine.
}
EOF
'''



# ---------------------------------------------------------------------------------------------
# ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ç³»
# ---------------------------------------------------------------------------------------------

[[plugins]]
# Reference: https://zenn.dev/vim_jp/articles/c0d75d1f3c7f33
# ä½¿ç”¨ã®æµã‚Œ.
# No  ç›®çš„                            å®Ÿéš›ã®æ“ä½œ
# 1   ddu.vimã§ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹         :call ddu#start({ã‚ªãƒ—ã‚·ãƒ§ãƒ³})
# 2   Inputç”¨ã®ãƒãƒƒãƒ•ã‚¡ã‚’è¡¨ç¤ºã™ã‚‹     :call ddu#ui#do_action("openFilterWindow")
# 3   Itemã‚’çµã‚Šè¾¼ã‚€ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹  i ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ› <ESC>
# 4   ä¸€è¦§ã®ãƒãƒƒãƒ•ã‚¡ã«ç§»å‹•ã™ã‚‹        :call ddu#ui#do_action("leaveFilterWindow")
# 5   Itemã‚’é¸ã¶                      j ã‚„ k ã§ç§»å‹•ã™ã‚‹
# 6   Kindã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‘¼ã³å‡ºã™      :call ddu#ui#do_action("itemAction", {"name": {ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å}})
# 
repo = 'Shougo/ddu.vim'
on_event = 'BufEnter'
depends = ['denops.vim']
# hook_source = '''
# call ddu#custom#patch_global({
#     \     "ui": "ff",
#     \     "sourceOptions": {
#     \         "_": {
#     \             "matchers": ["matcher_substring"]
#     \         },
#     \     },
#     \ })
# 
# " DduNodeFilesã§ä½¿ç”¨ã™ã‚‹è¨­å®šã‚’ç”¨æ„ã™ã‚‹
# call ddu#custom#patch_local("node-files", {
#     \     "sources": ["file_rec"],
#     \     "sourceParams": {
#     \         "file_rec": {
#     \             "ignoredDirectories": [".git", "node_modules"],
#     \         }
#     \     }
#     \ })
# 
# " DduWholeFilesã§ä½¿ç”¨ã™ã‚‹è¨­å®šã‚’ç”¨æ„ã™ã‚‹
# call ddu#custom#patch_local("whole-files", {
#     \     "sources": ["file_rec"],
#     \     "sourceParams": {
#     \         "file_rec": {
#     \             "ignoredDirectories": [],
#     \         }
#     \     },
#     \     "sourceOptions": {
#     \         "file_rec": {
#     \             "maxItems": 50000
#     \         }
#     \     }
#     \ })
# 
# " ddu-ui-ffä¸Šã§ã®ã¿æœ‰åŠ¹ãªKeymapï¼ˆ`e`ï¼‰ã‚’è¨­å®šã™ã‚‹
# autocmd FileType ddu-ff call s:ddu_ff_settings()
# function s:ddu_ff_settings() abort
#     nnoremap <buffer> e <Cmd>call ddu#ui#do_action('itemAction', {'name': 'open'})<CR>
# endfunction
# 
# " ddu#startã‚’å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆåã§å‘¼ã³å‡ºã™ã‚³ãƒãƒ³ãƒ‰ã‚’æº–å‚™ã™ã‚‹
# command! DduNodeFiles call ddu#start({"name": "node-files", "sourceOptions": {"file_rec": {"path": getcwd()}}})
# command! DduWholeFiles call ddu#start({"name": "whole-files", "sourceOptions": {"file_rec": {"path": getcwd()}}})
# '''

# hook_source = '''
# lua << EOF
# --  config = function()
#     vim.fn["ddu#custom#patch_global"]({
#         ui = "ff",
#         uiParams = {
#           ff = {
#             filterFloatingPosition = "bottom",
#             filterSplitDirection = "floating",
#             floatingBorder = "rounded",
#             previewFloating = true,
#             previewFloatingBorder = "rounded",
#             previewFloatingTitle = "Preview",
#             previewSplit = "horizontal",
#             prompt = "> ",
#             split = "floating",
#             startFilter = true,
#           }
#         },
#         sourceOptions = {
#           _ = {
#             matchers = {
#               "matcher_substring",
#             },
#             ignoreCase = true,
#           },
#         },
#       })
#     vim.fn["ddu#custom#patch_local"]("file_recursive", {
#         sources = {
#           {
#             name = { "file_rec" },
#             options = {
#               converters = {
#                 "converter_devicon",
#               },
#             },
#             params = {
#               ignoredDirectories = { "node_modules", ".git", "dist", ".vscode" },
#             },
#           },
#         },
#         kindOptions = {
#           file = {
#             defaultAction = "open",
#           }
#         }
#       })
#     -- vim.fn["ddu#custom#patch_local"]("colorscheme", {
#     --     sources = {
#     --       {
#     --         name = { "colorscheme" },
#     --       },
#     --     },
#     --     kindOptions = {
#     --       colorscheme = {
#     --         defaultAction = "set",
#     --       }
#     --     }
#     --   })
# 
#     vim.api.nvim_create_autocmd("FileType",{
#         pattern = "ddu-ff",
#         callback = function()
#           local opts = { noremap = true, silent = true, buffer = true }
#           vim.keymap.set({ "n" }, "q", [[<Cmd>call ddu#ui#ff#do_action("quit")<CR>]], opts)
#           vim.keymap.set({ "n" }, "<Cr>", [[<Cmd>call ddu#ui#ff#do_action("itemAction")<CR>]], opts)
#           vim.keymap.set({ "n" }, "i", [[<Cmd>call ddu#ui#ff#do_action("openFilterWindow")<CR>]], opts)
#           vim.keymap.set({ "n" }, "P", [[<Cmd>call ddu#ui#ff#do_action("togglePreview")<CR>]], opts)
#         end,
#       }
#       )
# 
#     vim.api.nvim_create_autocmd("FileType",{
#         pattern = "ddu-ff-filter",
#         callback = function()
#           local opts = { noremap = true, silent = true, buffer = true }
#           vim.keymap.set({ "n", "i" }, "<CR>", [[<Esc><Cmd>close<CR>]], opts)
#         end,
#       }
#       )
# --  end,
# EOF
# '''

hook_source = '''
" # --------------------------------------------------------------------------
" # ddu-ffã®å…±é€šã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¨­å®š.
" # --------------------------------------------------------------------------

" ddu-ffã®itemè¡¨ç¤ºã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸Šã«ã„ã‚‹æ™‚ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰.
autocmd FileType ddu-ff call s:on_ddu_ff_item_window()
function! s:on_ddu_ff_item_window() abort
  " Enterã§ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ.
  " ã‚¢ã‚¤ãƒ†ãƒ æœªé¸æŠãªã‚‰ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒå¯¾è±¡.
  nnoremap <buffer><silent> <CR>
        \ <Cmd>call ddu#ui#ff#do_action('itemAction')<CR>

  " iã§ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ã®ã‚¢ã‚¤ãƒ†ãƒ ã®é¸æŠçŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆ.
  nnoremap <buffer><silent> i
        \ <Cmd>call ddu#ui#ff#do_action('toggleSelectItem')<CR>

  " fã§FilterWindowã‚’ã‚‚ã†ä¸€åº¦é–‹ã.(itemã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‹Previewã§åˆ©ç”¨ã™ã‚‹)
  nnoremap <buffer><silent> f
        \ <Cmd>call ddu#ui#ff#do_action('openFilterWindow')<CR>

  " qã§dduã‚’é–‰ã˜ã‚‹.
  nnoremap <buffer><silent> q
        \ <Cmd>call ddu#ui#ff#do_action('quit')<CR>

  " ESCã§dduã‚’é–‰ã˜ã‚‹.
  nnoremap <buffer><silent> <ESC>
        \ <Cmd>call ddu#ui#ff#do_action('quit')<CR>

  " pã§previewã®ã‚ªãƒ³ã‚ªãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹.
  nnoremap <buffer><silent> p
        \ <Cmd>call ddu#ui#ff#do_action("togglePreview")<CR>

endfunction

" ddu-ffã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸Šã§ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰.
autocmd FileType ddu-ff-filter call s:on_ddu_ff_filter_window()
function! s:on_ddu_ff_filter_window() abort
  " ã‚¤ãƒ³ã‚µãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ä¸­ã«Enterã§FilterWindowã‚’ä¸€æ—¦é–‰ã˜ã¦itemé¸æŠWindowã«é·ç§»ã™ã‚‹.
  " å…¥åŠ›ã—ã¦ã„ãŸæ–‡å­—åˆ—ã¯FilterWindowã‚’itemé¸æŠWindowã‹ã‚‰å†åº¦FilterWindowã‚’é–‹ã„ãŸéš›ã«æ®‹ã£ã¦ã„ã‚‹.
  " itemã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’æ“ä½œã™ã‚‹ç‚ºã«normalãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã—ã¦ãŠã.
  inoremap <buffer><silent> <CR>
        \ <Esc><Cmd>call ddu#ui#ff#do_action("closeFilterWindow")<CR>

  " qã§dduã‚’é–‰ã˜ã‚‹.
  nnoremap <buffer><silent> q
        \ <Cmd>call ddu#ui#ff#do_action('quit')<CR>

  " ESCã§dduã‚’é–‰ã˜ã‚‹.
  nnoremap <buffer><silent> <ESC>
        \ <Cmd>call ddu#ui#ff#do_action('quit')<CR>

endfunction


" # --------------------------------------------------------------------------
" # ãƒ¬ã‚¸ã‚¹ã‚¿ä¸€è¦§.
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.5), math.floor(lines * 0.25)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.5), math.floor(columns * 0.25)

  vim.fn["ddu#custom#patch_local"]("paste_register", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduPasteRegister call ddu#start({
    \ "name": "paste_register",
    \ "ui": "ff",
    \ "sources": [{
    \   "name": 'register',
    \ }],
    \ "kindOptions": {
    \   "word": {
    \     "defaultAction": 'append',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "displaySourceName": "no",
    \     "startFilter": v:false,
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \   },
    \ }
    \})

nnoremap <buffer><silent><Leader>p :DduPasteRegister<CR>


" # --------------------------------------------------------------------------
" # LSP.
" # ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ã®wordã®å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—(definition).
" # --------------------------------------------------------------------------

" command! DduLspDefinition call ddu#start({
"     \ "sync": v:true,
"     \ "sources": [{
"     \   "name": 'lsp_definition',
"     \ }],
"     \ "uiParams": {
"     \   "ff": {
"     \     "immediateAction": 'open',
"     \   },
"     \ }
"     \})


" # --------------------------------------------------------------------------
" # LSP.
" # ã‚«ãƒ¼ã‚½ãƒ«ä¸‹ã®wordã®å‚ç…§ã‚¸ãƒ£ãƒ³ãƒ—(reference).
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.95), math.floor(lines * 0.01)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + 0.01

  vim.fn["ddu#custom#patch_local"]("lsp_reference_on_word", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduLspReferences call ddu#start({
    \ "name": "lsp_reference_on_word",
    \ "ui": "ff",
    \ "sync": v:true,
    \ "sources": [{
    \   "name": 'lsp_references',
    \   "params": {"includeDeclaration": v:false},
    \ }],
    \ "kindOptions": {
    \   "lsp": {
    \     "defaultAction": 'open',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "displaySourceName": "no",
    \     "startFilter": v:false,
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:true,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \   },
    \ }
    \})

nnoremap <buffer><silent>gr :DduLspReferences<CR>


" " # --------------------------------------------------------------------------
" " # LSP.
" " # ç¾åœ¨ã®ãƒãƒƒãƒ•ã‚¡å†…ã®ã‚·ãƒ³ãƒœãƒ«ä¸€è¦§(documentSymbol).
" " # --------------------------------------------------------------------------
" 
" lua << EOF
" local function resize()
"   local lines = vim.opt.lines:get()
"   local height, row = math.floor(lines * 0.95), math.floor(lines * 0.01)
"   local columns = vim.opt.columns:get()
"   local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
"   local previewWidth = width
"   local previewCol = col + 0.01
" 
"   vim.fn["ddu#custom#patch_local"]("lsp_documentSymbol_in_buffer", {
"     uiParams = {
"       ff = {
"         winHeight = height,
"         winRow = row,
"         winWidth = width,
"         winCol = col,
"         previewHeight = height,
"         previewRow = row,
"         previewWidth = previewWidth,
"         previewCol = previewCol,
"       },
"     },
"   })
" end
" resize()
" 
" vim.api.nvim_create_autocmd("VimResized", {
"   callback = resize,
" })
" EOF
" 
" command! DduLspDucmentSymbol call ddu#start({
"     \ "name": "lsp_documentSymbol_in_buffer",
"     \ "ui": "ff",
"     \ "sources": [{
"     \   "name": 'lsp_documentSymbol',
"     \   "options": {
"     \     "converters": [
"     \       {
"     \         "name": "converter_lsp_symbol",
"     \       },
"     \     ],
"     \   },
"     \ }],
"     \ "kindOptions": {
"     \   "lsp": {
"     \     "defaultAction": 'open',
"     \   },
"     \ },
"     \ "uiParams": {
"     \   "ff": {
"     \     "displaySourceName": "no",
"     \     "startFilter": v:false,
"     \     "split": "floating",
"     \     "floatingBorder": "rounded",
"     \     "filterFloatingPosition": "top",
"     \     "filterFloatingTitle": "Filter01",
"     \     "autoAction": {
"     \       "name": "preview",
"     \     },
"     \     "startAutoAction": v:true,
"     \     "previewFloating": v:true,
"     \     "previewFloatingBorder": "double",
"     \     "previewSplit": "vertical",
"     \     "previewFloatingTitle": "CodePreview",
"     \     "previewWindowOptions": [
"     \       [ "&signcolumn", "no" ],
"     \       [ "&foldcolumn", 0 ],
"     \       [ "&foldenable", 0 ],
"     \       [ "&number", 1 ],
"     \       [ "&wrap", 0 ],
"     \       [ "&scrolloff", 1 ],
"     \     ],
"     \     "highlights": {
"     \       "floating": "Normal",
"     \       "floatingBorder": "Normal",
"     \     },
"     \   },
"     \ }
"     \})
" 
" nnoremap <buffer><silent>gS :DduLspDucmentSymbol<CR>

" # --------------------------------------------------------------------------
" # LSP.
" # è­¦å‘Šä¸€è¦§(diagnostic).
" # linteråã‚’è¡¨ç¤ºã§ããªã„ç‚ºã€trouble.nvimã‚’åˆ©ç”¨ã™ã‚‹.
" # --------------------------------------------------------------------------

" command! DduLspDiagnostic call ddu#start({
"     \ "ui": "ff",
"     \ "sync": v:true,
"     \ "sourceOptions": {
"     \   "_": {
"     \     "converters": [
"     \        {
"     \          "name": "converter_lsp_diagnostic",
"     \          "params": {
"     \            "iconMap": {
"     \              "Error": "E",
"     \              "Warning": "W",
"     \              "Info": "I",
"     \              "Hint": "H",
"     \            },
"     \            "columnLength": 100,
"     \          },
"     \        },
"     \      ],
"     \   },
"     \ },
"     \ "sources": [{
"     \   "name": 'lsp_diagnostic',
"     \   "params": { "buffer": v:null, },
"     \ }],
"     \ "uiParams": {
"     \   "ff": {
"     \     "immediateAction": 'open',
"     \     "startFilter": v:false,
"     \   },
"     \  },
"     \})
" "     \ "sourceOptions": {
" "     \   "_": {
" "     \     "converters": ["converter_lsp_diagnostic"],
" "     \   },
" "     \ },
" "     \ "FilterParams": {
" "     \   "converter_lsp_diagnostic": {
" "     \     "IconMap": {
" "     \       "Warning": "b",
" "     \     },
" "     \   },
" "     \ },


" # --------------------------------------------------------------------------
" # LSP.
" # ä½œæ¥­ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã®ã‚·ãƒ³ãƒœãƒ«ä¸€è¦§(workspaceSymbol).
" # Not work on pylsp.
" # --------------------------------------------------------------------------

" command! DduLspWorkspaceSymbol call ddu#start({
"     \ "ui": "ff",
"     \ "sources": [{
"     \   "name": 'lsp_workspaceSymbol',
"     \ }],
"     \ "sourceOptions": {
"     \   "lsp": {
"     \     "volatile": v:true,
"     \   },
"     \ },
"     \ "uiParams": {
"     \   "ff": {
"     \     "ignoreEmpty": v:false,
"     \     "displayTree": v:true,
"     \   },
"     \ }
"     \})


" # --------------------------------------------------------------------------
" # LSP.
" # 
" # --------------------------------------------------------------------------

" " Not work on pylsp.
" command! DduLspCallHierarchy call ddu#start({
"     \ "sources": [{
"     \   "name": 'lsp_callHierarchy',
"     \   "params": {
"     \     "method": 'callHierarchy/outgoingCalls',
"     \   }
"     \ }],
"     \ "uiParams": {
"     \   "ff": {
"     \     "displayTree": v:true,
"     \     "startFilter": v:false,
"     \   },
"     \ }
"     \})


" # --------------------------------------------------------------------------
" # LSP.
" # ã‚³ãƒ¼ãƒ‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆ.
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.95), math.floor(lines * 0.01)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + 0.01

  vim.fn["ddu#custom#patch_local"]("lsp_codeaction_list", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduLspCodeAction call ddu#start({
    \ "name": "lsp_codeaction_list",
    \ "ui": "ff",
    \ "sync": v:true,
    \ "sources": [{
    \   "name": 'lsp_codeAction',
    \ }],
    \ "kindOptions": {
    \   "lsp": {
    \     "defaultAction": 'open',
    \   },
    \   "lsp_codeAction": {
    \     "defaultAction": 'apply',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "displaySourceName": "no",
    \     "startFilter": v:false,
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:true,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \   },
    \ }
    \})

nnoremap <buffer><silent>ga :DduLspCodeAction<CR>


" # --------------------------------------------------------------------------
" # ã‚ã„ã¾ã„æ¤œç´¢(ãƒ•ã‚¡ã‚¤ãƒ«å).
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.85), math.floor(lines * 0.1)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + width + 0.01

  vim.fn["ddu#custom#patch_local"]("find_file_by_ff", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduOpenFile call ddu#start({
    \ "name": "find_file_by_ff",
    \ "ui": "ff",
    \ "sources": [
    \   {
    \     "name": 'file_external',
    \     "params": {
    \       "cmd": ["fd", "-tf", "--color", "never", "--hidden", "--follow", "--exclude", ".git"],
    \     },
    \   },
    \ ],
    \ "sourceOptions": {
    \   "file_external": {
    \     'matchers': ['matcher_fzf'],
    \     'sorters': ['sorter_fzf'],
    \     "converters": ["converter_hl_dir", 'converter_devicon'],
    \   },
    \ },
    \ "kindOptions": {
    \   "file": {
    \     "defaultAction": 'open',
    \   },
    \ },
    \ 'filterParams': {
    \   'matcher_fzf': {
    \     'highlightMatched': 'Search',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "prompt": "> ",
    \     "startFilter": v:true,
    \     "displaySourceName": "no",
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:false,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \   },
    \ }
    \})

nnoremap <Leader>ff :DduOpenFile<CR>


" # --------------------------------------------------------------------------
" # ã‚ã„ã¾ã„æ¤œç´¢(ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®æ–‡å­—åˆ—ã‹ã‚‰ã®grep).
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.85), math.floor(lines * 0.1)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + width + 0.01

  vim.fn["ddu#custom#patch_local"]("find_file_by_grep", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduOpenFileByWordGrep call ddu#start({
    \ "name": "find_file_by_grep",
    \ "ui": "ff",
    \ "sources": [
    \   {
    \     "name": 'rg',
    \     "params": {
    \       "args": ["--column", "--no-heading", "--color", "never", "--json", "-g", "!Pipfile.lock"],
    \       "inputType": "migemo",
    \     },
    \   },
    \ ],
    \ "sourceOptions": {
    \   "rg": {
    \     'volatile': v:true,
    \     'matchers': [],
    \     'sorters': ['sorter_fzf'],
    \     "converters": ["converter_hl_dir", 'converter_devicon'],
    \   },
    \ },
    \ "kindOptions": {
    \   "file": {
    \     "defaultAction": 'open',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "prompt": "> ",
    \     "startFilter": v:true,
    \     "displaySourceName": "no",
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:false,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \   },
    \ }
    \})

nnoremap <Leader>fg :DduOpenFileByWordGrep<CR>

" # --------------------------------------------------------------------------
" # ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼.
" # --------------------------------------------------------------------------

" å®šæœŸçš„ã«ã‚¢ã‚¤ãƒ†ãƒ æ›´æ–°.
autocmd TabEnter,CursorHold,FocusGained <buffer>
	\ call ddu#ui#filer#do_action('checkItems')

" ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼ä¸Šã®ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°
autocmd FileType ddu-filer call s:ddu_filer_my_settings()
function! s:ddu_filer_my_settings() abort

  " ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šã§Enter or v: å³å´ã«é–‹ã(ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼ã¯é–‰ã˜ã‚‹)
  nnoremap <buffer><silent><expr> <CR>
    \ ddu#ui#get_item()->get('isTree', v:false) ?
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'narrow'})<CR>" :
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'open', 'params': {'command': 'vsplit'}})<CR>"

  " ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šã§Enter or v: å³å´ã«é–‹ã(ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼ã¯é–‰ã˜ã‚‹)
  nnoremap <buffer><silent><expr> v
    \ ddu#ui#get_item()->get('isTree', v:false) ?
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'narrow'})<CR>" :
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'open', 'params': {'command': 'vsplit'}})<CR>"

  " ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šã§e: æ—¢ã«é–‹ã„ã¦ã„ã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä¸Šã«é–‹ã.(ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼ã¯é–‰ã˜ã‚‹)
  nnoremap <buffer><silent><expr> e
    \ ddu#ui#get_item()->get('isTree', v:false) ?
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'narrow'})<CR>" :
    \ "<Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'open', 'params': {'command': 'split'}})<CR>"

  " ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸Šã§o: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é–‹ã.
  nnoremap <buffer> o
        \ <Cmd>call ddu#ui#filer#do_action('expandItem',
        \ {'mode': 'toggle'})<CR>

  " q or <ESC>: filerã‚’é–‰ã˜ã‚‹
  nnoremap <buffer><silent> <Esc>
    \ <Cmd>call ddu#ui#filer#do_action('quit')<CR>

  " q or <ESC>: filerã‚’é–‰ã˜ã‚‹
  nnoremap <buffer><silent> q
    \ <Cmd>call ddu#ui#filer#do_action('quit')<CR>


"   " ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¦šãˆã‚‰ã‚Œãªã„ã‹ã‚‰ä¸€æ—¦æ¶ˆã—ã¦ãŠã.
"   nnoremap <buffer><silent> <Space>
"         \ <Cmd>call ddu#ui#filer#do_action('toggleSelectItem')<CR>
" 
"   nnoremap <buffer><silent> ..
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'narrow', 'params': {'path': '..'}})<CR>
" 
"   nnoremap <buffer><silent> c
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'copy'})<CR>
" 
"   nnoremap <buffer><silent> p
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'paste'})<CR>
" 
"   nnoremap <buffer><silent> d
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'delete'})<CR>
" 
"   nnoremap <buffer><silent> r
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'rename'})<CR>
" 
"   nnoremap <buffer><silent> mv
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'move'})<CR>
" 
"   nnoremap <buffer><silent> t
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'newFile'})<CR>
" 
"   nnoremap <buffer><silent> mk
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'newDirectory'})<CR>
" 
"   nnoremap <buffer><silent> yy
"     \ <Cmd>call ddu#ui#filer#do_action('itemAction', {'name': 'yank'})<CR>
endfunction

command! DduOpenFiler call ddu#start({
\   'name': 'filer',
\   'ui': 'filer',
\   'sources': ['file'],
\   "sourceOptions": {
\     "file": {
\       "columns": ['icon_filename'],
\       "converters": ["converter_hl_dir"],
\       "sorters": ['sorter_fzf'],
\     },
\   },
\   'kindOptions': {
\     'file': {
\       'defaultAction': 'open',
\     },
\   },
\   'uiParams': {
\     'filer': {
\       'winWidth': 40,
\       'split': 'vertical',
\       'splitDirection': 'topleft',
\       'sort': 'filename',
\       'sortTreeFirst': v:true,
\     }
\   },
\   "searchPath": expand("%:p"),
\ })

" command! DduOpenFiler call ddu#start({
" \   'name': 'filer',
" \   'ui': 'filer',
" \   'sources': [
" \     {
" \       "name": 'file_external',
" \       "params": {
" \         "cmd": ["fd", "-tf", "--color", "never", "--hidden", "--follow", "--exclude", ".git"],
" \       },
" \     },
" \   ],
" \   "sourceOptions": {
" \     "file_external": {
" \       "columns": ['icon_filename'],
" \       "converters": ["converter_hl_dir"],
" \     },
" \   },
" \   'kindOptions': {
" \     'file': {
" \       'defaultAction': 'open',
" \     },
" \   },
" \   'uiParams': {
" \     'filer': {
" \       'winWidth': 100,
" \       'split': 'vertical',
" \       'toggle': v:true,
" \       'splitDirection': 'topleft',
" \       'sort': 'filename',
" \       'sortTreeFirst': v:true,
" \     }
" \   },
" \   "searchPath": expand("%:p"),
" \ })

nnoremap <Leader>ft :DduOpenFiler<CR>

" # --------------------------------------------------------------------------
" # ãƒãƒƒãƒ•ã‚¡èª­ã¿è¾¼ã¿.
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.95), math.floor(lines * 0.01)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + 0.01

  vim.fn["ddu#custom#patch_local"]("find_opening_buffer", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduOpenBuffer call ddu#start({
    \ "name": "find_opening_buffer",
    \ "ui": "ff",
    \ "sources": ['buffer'],
    \ "sourceOptions": {
    \   "buffer": {
    \     "columns": ['icon_filename'],
    \   },
    \ },
    \ "columnParams": {
    \   "icon_filename": {
    \     "pathDisplayOption": "relative"
    \   },
    \ },
    \ "kindOptions": {
    \   "file": {
    \     "defaultAction": 'open',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "displaySourceName": "no",
    \     "startFilter": v:false,
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:true,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \   },
    \ }
    \})

nnoremap <Leader>fb :DduOpenBuffer<CR>


" # --------------------------------------------------------------------------
" # ã‚¸ãƒ£ãƒ³ãƒ—ãƒªã‚¹ãƒˆ
" # --------------------------------------------------------------------------

lua << EOF
local function resize()
  local lines = vim.opt.lines:get()
  local height, row = math.floor(lines * 0.95), math.floor(lines * 0.01)
  local columns = vim.opt.columns:get()
  local width, col = math.floor(columns * 0.49), math.floor(columns * 0.01)
  local previewWidth = width
  local previewCol = col + 0.01

  vim.fn["ddu#custom#patch_local"]("return_from_jumplist", {
    uiParams = {
      ff = {
        winHeight = height,
        winRow = row,
        winWidth = width,
        winCol = col,
        previewHeight = height,
        previewRow = row,
        previewWidth = previewWidth,
        previewCol = previewCol,
      },
    },
  })
end
resize()

vim.api.nvim_create_autocmd("VimResized", {
  callback = resize,
})
EOF

command! DduOpenJumpList call ddu#start({
    \ "name": "return_from_jumplist",
    \ "ui": "ff",
    \ "sources": ['jumplist'],
    \ "sourceOptions": {
    \   "jumplist": {
    \     "sorters": ["sorter_reversed"],
    \   },
    \ },
    \ "kindOptions": {
    \   "file": {
    \     "defaultAction": 'open',
    \   },
    \ },
    \ "uiParams": {
    \   "ff": {
    \     "displaySourceName": "no",
    \     "startFilter": v:false,
    \     "split": "floating",
    \     "floatingBorder": "rounded",
    \     "filterFloatingPosition": "top",
    \     "filterFloatingTitle": "Filter01",
    \     "autoAction": {
    \       "name": "preview",
    \     },
    \     "startAutoAction": v:true,
    \     "previewFloating": v:true,
    \     "previewFloatingBorder": "double",
    \     "previewSplit": "vertical",
    \     "previewFloatingTitle": "CodePreview",
    \     "previewWindowOptions": [
    \       [ "&signcolumn", "no" ],
    \       [ "&foldcolumn", 0 ],
    \       [ "&foldenable", 0 ],
    \       [ "&number", 1 ],
    \       [ "&wrap", 0 ],
    \       [ "&scrolloff", 1 ],
    \     ],
    \     "highlights": {
    \       "floating": "Normal",
    \       "floatingBorder": "Normal",
    \     },
    \   },
    \ }
    \})

nnoremap <Leader>fj :DduOpenJumpList<CR>

'''


[[plugins]]
# ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼é¢¨ã®UI
repo = 'Shougo/ddu-ui-ff'
on_source = 'ddu.vim'

[[plugins]]
# ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼é¢¨ã®UI
repo = 'Shougo/ddu-ui-filer'
on_source = 'ddu.vim'

[[plugins]]
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã™ã‚‹source
# itemãŒtreeã«å¯¾å¿œã—ã¦ã„ã‚‹..
repo = 'Shougo/ddu-source-file'
on_source = 'ddu.vim'

[[plugins]]
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†å¸°çš„ã«å–å¾—ã™ã‚‹source
# ã“ã®sourceã‹ã‚‰å–å¾—ã•ã‚ŒãŸitemã¯treeã«å¯¾å¿œã—ã¦ã„ãªã„.
repo = 'Shougo/ddu-source-file_rec'
on_source = 'ddu.vim'

[[plugins]]
# æ–‡å­—åˆ—,ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã«ripgrepã‚’ä½¿ç”¨ã™ã‚‹source
repo = 'shun/ddu-source-rg'
on_source = 'ddu.vim'

[[plugins]]
# fileã®kindã‚’æŒã¤sourceã‚’å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã§ãã‚‹.
repo = 'matsui54/ddu-source-file_external'
on_source = 'ddu.vim'

# [[plugins]]
# # 
# repo = 'Shougo/ddu-source-dummy'
# on_source = 'ddu.vim'

[[plugins]]
# LSPã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹source
repo = 'uga-rosa/ddu-source-lsp'
on_source = 'ddu.vim'

[[plugins]]
# ãƒãƒƒãƒ•ã‚¡ä¸€è¦§ã‚’å–å¾—ã™ã‚‹source
repo = 'shun/ddu-source-buffer'
on_source = 'ddu.vim'

[[plugins]]
# jumplistã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹source
repo = 'kamecha/ddu-source-jumplist'
on_source = 'ddu.vim'


[[plugins]]
# ãƒ¬ã‚¸ã‚¹ã‚¿å†…ã®ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ã‚’å–å¾—ã™ã‚‹source
repo = 'Shougo/ddu-source-register'
on_source = 'ddu.vim'

[[plugins]]
# 
repo = 'kuuote/ddu-source-mr'
depends = ["mr.vim"]
on_source = 'ddu.vim'

[[plugins]]
# 
repo = 'lambdalisue/mr.vim'


[[plugins]]
# éƒ¨åˆ†æ–‡å­—åˆ—ã¸ã®å®Œå…¨ä¸€è‡´ã«ã‚ˆã£ã¦sourceã‚’çµã‚Šè¾¼ã‚€filter(matcher)
repo = 'Shougo/ddu-filter-matcher_substring'
on_source = 'ddu.vim'

[[plugins]]
# ã‚ã„ã¾ã„æ¤œç´¢ã¨kensaku.vimã«å¯¾å¿œã—ãŸfiler(matcher)
repo = 'yuki-yano/ddu-filter-fzf'
on_source = 'ddu.vim'

[[plugins]]
# é€†é †ã«ä¸¦ã¹ã‚‹filer(sorter)
repo = 'Shougo/ddu-filter-sorter_reversed'
on_source = 'ddu.vim'

[[plugins]]
# sourceã®ãƒ•ã‚¡ã‚¤ãƒ«åã«nordfontã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä»˜ã‘ã‚‹filter(converter)
repo = 'uga-rosa/ddu-filter-converter_devicon'
on_source = 'ddu.vim'

[[plugins]]
# sourceãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è‰²ã‚’ä»˜ã‘ã‚‹filter(converter)
repo = 'kyoh86/ddu-filter-converter_hl_dir'
on_source = 'ddu.vim'

[[plugins]]
# iconã¨ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤ºã™ã‚‹column(ui-filerç”¨)
repo = 'ryota2357/ddu-column-icon_filename'
on_source = 'ddu.vim'

# "4513ECHO/ddu-source-colorscheme",

[[plugins]]
# Openãªã©ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£ã®å‡¦ç†ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹kind
repo = 'Shougo/ddu-kind-file'
on_source = 'ddu.vim'

[[plugins]]
# ä»»æ„ã®æ–‡å­—åˆ—ã«å¯¾ã™ã‚‹å‡¦ç†ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹kind
repo = 'Shougo/ddu-kind-word'
on_source = 'ddu.vim'



# ---------------------------------------------------------------------------------------------
# ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è£œåŠ©.
# Outline(Symbol)ã®è¡¨ç¤º.
# ---------------------------------------------------------------------------------------------

[[plugins]]
repo = 'stevearc/aerial.nvim'
on_event = 'BufEnter'
depends = ["nvim-treesitter"]
hook_source = '''
lua << EOF
-- Call the setup function to change the default behavior
require("aerial").setup({

  layout = {
    default_direction = "left",
  },
  -- When true, don't load aerial until a command or function is called
  -- Defaults to true, unless `on_attach` is provided, then it defaults to false
  lazy_load = true, -- TODO: 

  -- Highlight the closest symbol if the cursor is not exactly on one.
  highlight_closest = true,

  -- Highlight the symbol in the source buffer when cursor is in the aerial win
  highlight_on_hover = true,

  -- When jumping to a symbol, highlight the line for this many ms.
  -- Set to false to disable
  highlight_on_jump = 700,

  -- Jump to symbol in source window when the cursor moves
  autojump = false,

  -- When true, aerial will automatically close after jumping to a symbol
  close_on_select = true,

  -- Options for the floating nav windows
  nav = {
    border = "rounded",
    max_height = 30, -- 0.9,
    min_height = { 30, 0.1 },
    max_width = 20, -- 0.5,
    min_width = { 0.2, 20 },
    win_opts = {
      cursorline = true,
      winblend = 10,
    },
    -- Jump to symbol in source window when the cursor moves
    autojump = false,
    -- Show a preview of the code in the right column, when there are no child symbols
    preview = true,
    -- Keymaps in the nav window
    keymaps = {
      ["<CR>"] = "actions.jump",
      ["e"] = "actions.jump",
      ["v"] = "actions.jump_vsplit",
      ["s"] = "actions.jump_split",
      ["<C+h"] = "actions.left",
      ["h"] = "actions.left",
      ["<C+l"] = "actions.right",
      ["l"] = "actions.right",
      ["q"] = "actions.close",
      ["<Ecs>"] = "actions.close",
    },
  },

  lsp = {
    -- Fetch document symbols when LSP diagnostics update.
    -- If false, will update on buffer changes.
    diagnostics_trigger_update = false,

    -- Set to false to not update the symbols when there are LSP errors
    update_when_errors = false,

    -- How long to wait (in ms) after a buffer change before updating
    -- Only used when diagnostics_trigger_update = false
    update_delay = 30000,

    -- Map of LSP client name to priority. Default value is 10.
    -- Clients with higher (larger) priority will be used before those with lower priority.
    -- Set to -1 to never use the client.
    priority = {
      -- pyright = 10,
    },
  },

  treesitter = {
    -- How long to wait (in ms) after a buffer change before updating
    update_delay = 30000,
  },

  markdown = {
    -- How long to wait (in ms) after a buffer change before updating
    update_delay = 30000,
  },

  man = {
    -- How long to wait (in ms) after a buffer change before updating
    update_delay = 30000,
  },
})
vim.keymap.set("n", "go", "<cmd>AerialToggle!<CR>")
vim.keymap.set("n", "gO", "<cmd>AerialNavToggle<CR>")

EOF

hi link AerialClass Type
hi link AerialClassIcon Special
hi link AerialFunction Special
hi AerialFunctionIcon guifg=#cb4b16 guibg=NONE guisp=NONE gui=NONE cterm=NONE

" There's also this group for the fallback of the text if a specific
" class highlight isn't defined
hi link AerialNormal Normal
" There's also this group for the cursor position
hi link AerialLine QuickFixLine
" If highlight_mode="split_width", you can set a separate color for the
" non-current location highlight
hi AerialLineNC guibg=Gray

" You can customize the guides (if show_guide=true)
hi link AerialGuide Comment
" You can set a different guide color for each level
hi AerialGuide1 guifg=Red
hi AerialGuide2 guifg=Blue
'''

# ---------------------------------------------------------------------------------------------
# Git
# ---------------------------------------------------------------------------------------------

[[plugins]]
# è¡Œã®æ¨ªã«å·®åˆ†æƒ…å ±è¡¨ç¤º.
repo = 'lewis6991/gitsigns.nvim'
on_event = "BufEnter"
hook_source = '''
lua << EOF
-- provided default setting
require('gitsigns').setup {
  signs = {
    add          = { text = 'â”‚' },
    change       = { text = 'â”‚' },
    delete       = { text = '_' },
    topdelete    = { text = 'â€¾' },
    changedelete = { text = '~' },
    untracked    = { text = 'â”†' },
  },
  signcolumn = true,  -- Toggle with `:Gitsigns toggle_signs`
  numhl      = false, -- Toggle with `:Gitsigns toggle_numhl`
  linehl     = false, -- Toggle with `:Gitsigns toggle_linehl`
  word_diff  = false, -- Toggle with `:Gitsigns toggle_word_diff`
  watch_gitdir = {
    follow_files = true
  },
  attach_to_untracked = true,
  current_line_blame = false, -- Toggle with `:Gitsigns toggle_current_line_blame`
  current_line_blame_opts = {
    virt_text = true,
    virt_text_pos = 'eol', -- 'eol' | 'overlay' | 'right_align'
    delay = 1000,
    ignore_whitespace = false,
    virt_text_priority = 100,
  },
  current_line_blame_formatter = '<author>, <author_time:%Y-%m-%d> - <summary>',
  sign_priority = 6,
  update_debounce = 100,
  status_formatter = nil, -- Use default
  max_file_length = 40000, -- Disable if file is longer than this (in lines)
  preview_config = {
    -- Options passed to nvim_open_win
    border = 'single',
    style = 'minimal',
    relative = 'cursor',
    row = 0,
    col = 1
  },
  yadm = {
    enable = false
  },
}
EOF

'''

